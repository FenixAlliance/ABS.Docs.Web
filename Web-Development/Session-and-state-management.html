<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sessions and State - Alliance Business Suite Documentation</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The Ultimate Business Development Platform">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../index.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item "><a href="../About.html"><strong aria-hidden="true">2.</strong> About</a></li><li class="chapter-item "><a href="../Roadmap.html"><strong aria-hidden="true">3.</strong> Roadmap</a></li><li class="chapter-item "><a href="../References.html"><strong aria-hidden="true">4.</strong> API Reference</a></li><li class="chapter-item "><a href="../Requirements.html"><strong aria-hidden="true">5.</strong> Requirements</a></li><li class="chapter-item "><a href="../Getting-started.html"><strong aria-hidden="true">6.</strong> Getting Started</a></li><li class="chapter-item "><a href="../Fundamentals.html"><strong aria-hidden="true">7.</strong> Fundamentals</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Fundamentals/Installation.html"><strong aria-hidden="true">7.1.</strong> Installation</a></li><li class="chapter-item "><a href="../Fundamentals/Configuration.html"><strong aria-hidden="true">7.2.</strong> Configuration</a></li><li class="chapter-item "><a href="../Fundamentals/Environments.html"><strong aria-hidden="true">7.3.</strong> Environments</a></li><li class="chapter-item "><a href="../Fundamentals/Hosting.html"><strong aria-hidden="true">7.4.</strong> Hosting</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Fundamentals/Hosting/Hosting-on-ABS-Cloud.html"><strong aria-hidden="true">7.4.1.</strong> Hosting on ABS Cloud</a></li><li class="chapter-item "><a href="../Fundamentals/Hosting/Hosting-on-IIS.html"><strong aria-hidden="true">7.4.2.</strong> Hosting on IIS</a></li></ol></li><li class="chapter-item "><a href="../Fundamentals/Logging.html"><strong aria-hidden="true">7.5.</strong> Logging</a></li><li class="chapter-item "><a href="../Fundamentals/Routing.html"><strong aria-hidden="true">7.6.</strong> Routing</a></li><li class="chapter-item "><a href="../Fundamentals/Static-Files.html"><strong aria-hidden="true">7.7.</strong> Static Files</a></li><li class="chapter-item "><a href="../Fundamentals/Data-Access.html"><strong aria-hidden="true">7.8.</strong> Data Access</a></li></ol></li><li class="chapter-item expanded "><a href="../Web-Development.html"><strong aria-hidden="true">8.</strong> Web Development</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Web-Development/Web-Portals.html"><strong aria-hidden="true">8.1.</strong> Web Portals</a></li><li class="chapter-item "><a href="../Web-Development/Web-Pages.html"><strong aria-hidden="true">8.2.</strong> Web Pages</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Web-Development/Web-Pages/Razor-Pages.html"><strong aria-hidden="true">8.2.1.</strong> Razor Pages</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Web-Development/Web-Pages/Razor-Pages/Razor-Syntax.html"><strong aria-hidden="true">8.2.1.1.</strong> Razor Syntax</a></li></ol></li><li class="chapter-item "><a href="../Web-Development/Web-Pages/Blazor-Pages.html"><strong aria-hidden="true">8.2.2.</strong> Blazor Pages</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Web-Development/Web-Pages/Blazor-Pages/Data-Binding.html"><strong aria-hidden="true">8.2.2.1.</strong> Data Binding</a></li><li class="chapter-item "><a href="../Web-Development/Web-Pages/Blazor-Pages/Event-Handling.html"><strong aria-hidden="true">8.2.2.2.</strong> Event Handling</a></li><li class="chapter-item "><a href="../Web-Development/Web-Pages/Blazor-Pages/Forms-and-validation.html"><strong aria-hidden="true">8.2.2.3.</strong> Forms and Validation</a></li></ol></li></ol></li><li class="chapter-item "><a href="../Web-Development/Web-Themes.html"><strong aria-hidden="true">8.3.</strong> Web Themes</a></li><li class="chapter-item "><a href="../Web-Development/Web-Templates.html"><strong aria-hidden="true">8.4.</strong> Web Templates</a></li><li class="chapter-item "><a href="../Web-Development/Web-Components.html"><strong aria-hidden="true">8.5.</strong> Web Components</a></li><li class="chapter-item "><a href="../Web-Development/Client-Side-Apps.html"><strong aria-hidden="true">8.6.</strong> Client Side-Apps</a></li><li class="chapter-item expanded "><a href="../Web-Development/Session-and-state-management.html" class="active"><strong aria-hidden="true">8.7.</strong> Sessions and State</a></li></ol></li><li class="chapter-item "><a href="../Web-API-Development.html"><strong aria-hidden="true">9.</strong> Web API Development</a></li><li class="chapter-item "><a href="../Module-Development.html"><strong aria-hidden="true">10.</strong> Module Development</a></li><li class="chapter-item "><a href="../Internationalization.html"><strong aria-hidden="true">11.</strong> Internationalization</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Internationalization/Localization-Strings.html"><strong aria-hidden="true">11.1.</strong> Localization Strings</a></li></ol></li><li class="chapter-item "><a href="../Components.html"><strong aria-hidden="true">12.</strong> Components</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Alliance-Core-Libraries.html"><strong aria-hidden="true">12.1.</strong> Alliance Core Libraries</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Model.html"><strong aria-hidden="true">12.2.</strong> Alliance Business Model</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Alliance-Business-Model/Records.html"><strong aria-hidden="true">12.2.1.</strong> Records</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Model/Extensibility.html"><strong aria-hidden="true">12.2.2.</strong> Extensibility</a></li></ol></li><li class="chapter-item "><a href="../Components/Alliance-Passport-Service.html"><strong aria-hidden="true">12.3.</strong> Alliance Passport Service</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Alliance-Passport-Service/Account-Holders.html"><strong aria-hidden="true">12.3.1.</strong> Account Holders</a></li><li class="chapter-item "><a href="../Components/Alliance-Passport-Service/Business-Tenants.html"><strong aria-hidden="true">12.3.2.</strong> Business Tenants</a></li><li class="chapter-item "><a href="../Components/Alliance-Passport-Service/Security-Roles.html"><strong aria-hidden="true">12.3.3.</strong> Security Roles</a></li><li class="chapter-item "><a href="../Components/Alliance-Passport-Service/Security-Groups.html"><strong aria-hidden="true">12.3.4.</strong> Security Groups</a></li><li class="chapter-item "><a href="../Components/Alliance-Passport-Service/Business-PErmissions.html"><strong aria-hidden="true">12.3.5.</strong> Business Permissions</a></li></ol></li><li class="chapter-item "><a href="../Components/Alliance-Business-Platform.html"><strong aria-hidden="true">12.4.</strong> Alliance Business Platform</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/APIs.html"><strong aria-hidden="true">12.4.1.</strong> Application Programming Interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/APIs/REST-API.html"><strong aria-hidden="true">12.4.1.1.</strong> REST API</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/APIs/GraphQl-API.html"><strong aria-hidden="true">12.4.1.2.</strong> GraphQl API</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/APIs/GRPC-API.html"><strong aria-hidden="true">12.4.1.3.</strong> GRPC API</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/APIs/ABS-Tx.html"><strong aria-hidden="true">12.4.1.4.</strong> ABS TermX</a></li></ol></li><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/SDKs.html"><strong aria-hidden="true">12.4.2.</strong> Software Development Kits</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/SDKs/SDK-Nuget-Package.html"><strong aria-hidden="true">12.4.2.1.</strong> .NET SDK</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/SDKs/DTOs-Nuget-Package.html"><strong aria-hidden="true">12.4.2.2.</strong> .NET DTOs Library</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Platform/SDKs/PowerShell-CLI-Module.html"><strong aria-hidden="true">12.4.2.3.</strong> PowerShell CLI</a></li></ol></li></ol></li><li class="chapter-item "><a href="../Components/Alliance-Business-Studio.html"><strong aria-hidden="true">12.5.</strong> Alliance Business Studio</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Alliance-Business-Studio/Layout.html"><strong aria-hidden="true">12.5.1.</strong> Layout</a></li></ol></li><li class="chapter-item "><a href="../Components/Alliance-Business-Pocket.html"><strong aria-hidden="true">12.6.</strong> Alliance Business Pocket</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Cloud.html"><strong aria-hidden="true">12.7.</strong> Alliance Business Cloud</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Alliance-Business-Cloud/About.html"><strong aria-hidden="true">12.7.1.</strong> About</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Cloud/View-Statistics.html"><strong aria-hidden="true">12.7.2.</strong> View Statistics</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Cloud/Hosting-Features.html"><strong aria-hidden="true">12.7.3.</strong> Hosting-Features</a></li><li class="chapter-item "><a href="../Components/Alliance-Business-Cloud/Allocated-and-Consumed-Resources.html"><strong aria-hidden="true">12.7.4.</strong> Allocated and Consumed Resources</a></li></ol></li><li class="chapter-item "><a href="../Components/Modules.html"><strong aria-hidden="true">12.8.</strong> Official Modules</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Modules/CRM.html"><strong aria-hidden="true">12.8.1.</strong> Contact Sight</a></li><li class="chapter-item "><a href="../Components/Modules/CMS.html"><strong aria-hidden="true">12.8.2.</strong> Media Portals</a></li><li class="chapter-item "><a href="../Components/Modules/ECOMMERCE.html"><strong aria-hidden="true">12.8.3.</strong> eCommerce</a></li><li class="chapter-item "><a href="../Components/Modules/Accounting.html"><strong aria-hidden="true">12.8.4.</strong> Accounting Manager</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Components/Modules/Accounting/Ledgers.html"><strong aria-hidden="true">12.8.4.1.</strong> Ledgers</a></li></ol></li><li class="chapter-item "><a href="../Components/Modules/IAM.html"><strong aria-hidden="true">12.8.5.</strong> Identity &amp; Access Management</a></li><li class="chapter-item "><a href="../Components/Modules/Workflows.html"><strong aria-hidden="true">12.8.6.</strong> Workflows Studio</a></li></ol></li></ol></li><li class="chapter-item "><a href="../Security.html"><strong aria-hidden="true">13.</strong> Security</a></li><li class="chapter-item "><a href="../Advanced.html"><strong aria-hidden="true">14.</strong> Advanced</a></li><li class="chapter-item "><a href="../Changelog.html"><strong aria-hidden="true">15.</strong> Changelog</a></li><li class="chapter-item "><a href="../Contributing.html"><strong aria-hidden="true">16.</strong> Contributing</a></li><li class="chapter-item "><a href="../CODE_OF_CONDUCT.html"><strong aria-hidden="true">17.</strong> Code of Conduct</a></li><li class="chapter-item "><a href="../THIRD_PARTY_NOTICES.html"><strong aria-hidden="true">18.</strong> Third Party Notices</a></li><li class="chapter-item "><a href="../License.html"><strong aria-hidden="true">19.</strong> License</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Alliance Business Suite Documentation</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="session-and-state-management-in-the-alliance-business-suite"><a class="header" href="#session-and-state-management-in-the-alliance-business-suite">Session and state management in the Alliance Business Suite</a></h1>
<p>HTTP is a stateless protocol. By default, HTTP requests are independent messages that don't retain user values. This article describes several approaches to preserve user data between requests.</p>
<h2 id="state-management"><a class="header" href="#state-management">State management</a></h2>
<p>State for the Alliance Business Suite can be stored using several approaches. Each approach is described later in this topic.</p>
<table><thead><tr><th>Storage approach</th><th>Storage mechanism</th></tr></thead><tbody>
<tr><td><a href="#cookies">Cookies</a></td><td>HTTP cookies. May include data stored using server-side app code.</td></tr>
<tr><td><a href="#session-state">Session state</a></td><td>HTTP cookies and server-side app code</td></tr>
<tr><td><a href="#tempdata">TempData</a></td><td>HTTP cookies or session state</td></tr>
<tr><td><a href="#query-strings">Query strings</a></td><td>HTTP query strings</td></tr>
<tr><td><a href="#hidden-fields">Hidden fields</a></td><td>HTTP form fields</td></tr>
<tr><td><a href="#httpcontextitems">HttpContext.Items</a></td><td>Server-side app code</td></tr>
<tr><td><a href="#cache">Cache</a></td><td>Server-side app code</td></tr>
</tbody></table>
<h2 id="cookies"><a class="header" href="#cookies">Cookies</a></h2>
<p>Cookies store data across requests. Because cookies are sent with every request, their size should be kept to a minimum. Ideally, only an identifier should be stored in a cookie with the data stored by the ABS Instance. Most browsers restrict cookie size to 4096 bytes. Only a limited number of cookies are available for each domain.</p>
<p>Because cookies are subject to tampering, they must be validated by the app. Cookies can be deleted by users and expire on clients. However, cookies are generally the most durable form of data persistence on the client.</p>
<p>Cookies are often used for personalization, where content is customized for a known user. The user is only identified and not authenticated in most cases. The cookie can store the user's name, account name, or unique user ID such as a GUID. The cookie can be used to access the user's personalized settings, such as their preferred website background color.</p>
<p>See the European Union General Data Protection Regulations (GDPR) when issuing cookies and dealing with privacy concerns. For more information, see General Data Protection Regulation (GDPR) support for the Alliance Business Suite.</p>
<h2 id="session-state"><a class="header" href="#session-state">Session state</a></h2>
<p>Session state is an Alliance Business Suite Instance scenario for the storage of user data while the user browses a web app. Session state uses a store maintained by the app to persist data across requests from a client. The session data is backed by a cache and considered ephemeral data. The site should continue to function without the session data. Critical application data should be stored in the Account Holder database entity and cached in session only as a performance optimization.</p>
<p>The session isn't supported in SignalR functionalities because a SignalR Hub may execute independently of an HTTP context. For example, this can occur when a long polling request is held open by a hub beyond the lifetime of the request's HTTP context.</p>
<p>The Alliance Business Suite maintains the session state by providing a cookie to the client that contains a session ID. The cookie session ID:</p>
<ul>
<li>Is sent to the app with each request.</li>
<li>Is used by the app to fetch the session data.</li>
</ul>
<p>Session state exhibits the following behaviors:</p>
<ul>
<li>The session cookie is specific to the browser. Sessions aren't shared across browsers.</li>
<li>Session cookies are deleted when the browser session ends.</li>
<li>If a cookie is received for an expired session, a new session is created that uses the same session cookie.</li>
<li>Empty sessions aren't retained. The session must have at least one value set to persist the session across requests. When a session isn't retained, a new session ID is generated for each new request.</li>
<li>The app retains a session for a limited time after the last request. The app either sets the session timeout or uses the default value of 20 minutes. Session state is ideal for storing user data:</li>
<li>That's specific to a particular session.</li>
<li>Where the data doesn't require permanent storage across sessions.</li>
<li>Session data is deleted either when the ISession.Clear implementation is called or when the session expires.</li>
<li>There's no default mechanism to inform app code that a client browser has been closed or when the session cookie is deleted or expired on the client.</li>
<li>Session state cookies aren't marked essential by default. Session state isn't functional unless tracking is permitted by the site visitor. For more information, see <a href="">General Data Protection Regulation (GDPR) support across the Alliance Business Suite</a></li>
</ul>
<p>Don't store sensitive data in session state. The user might not close the browser and clear the session cookie. Some browsers maintain valid session cookies across browser windows. A session might not be restricted to a single user. The next user might continue to browse the app with the same session cookie.</p>
<p>The in-memory cache provider stores session data in the memory of the server where the app resides. In a server farm scenario:</p>
<p>Use sticky sessions to tie each session to a specific app instance on an individual server. Azure App Service uses Application Request Routing (ARR) to enforce sticky sessions by default. However, sticky sessions can affect scalability and complicate web app updates. A better approach is to configure the Alliance Business Suite to a Redis or SQL Server by enabling distributed cache, which doesn't require sticky sessions. For more information, see Distributed caching in the Alliance Business Suite.</p>
<p>The session cookie is encrypted via IDataProtector. Data Protection must be properly configured to read session cookies on each machine. For more information, see Alliance Business Suite Data Protection and Key storage providers.</p>
<p><strong>Warning</strong></p>
<p>Don't store sensitive data in session state. The user might not close the browser and clear the session cookie. Some browsers maintain valid session cookies across browser windows. A session might not be restricted to a single user. The next user might continue to browse the app with the same session cookie.</p>
<p>The in-memory cache provider stores session data in the memory of the server where the app resides. In a server farm scenario:</p>
<p>Use sticky sessions to tie each session to a specific app instance on an individual server. Alliance Business Cloud uses Application Request Routing (ARR) to enforce sticky sessions by default. However, sticky sessions can affect scalability and complicate web app updates. A better approach is to enable Redis or SQL Server distributed cache, which doesn't require sticky sessions. For more information, see Distributed caching in the Alliance Business Suite.</p>
<h2 id="configure-session-state"><a class="header" href="#configure-session-state">Configure session state</a></h2>
<p>To configure session state you'll need to visit your portal's configuration dashboard. The Alliance Business Suite handles the configuration required to add session management through the in-memory session provider with a default in-memory implementation of a Distributed Cache.</p>
<p>You can set the timeout in both development and production environments to simplify testing.</p>
<ul>
<li><code>HttpContext.Session</code> is available after session state is configured.</li>
<li><code>HttpContext.Session</code> can't be accessed before UseSession has been called.</li>
</ul>
<p>A new session with a new session cookie can't be created after the Alliance Business Suite has begun writing to the response stream. The exception is recorded in the web server log and not displayed in the browser.</p>
<h2 id="load-session-state-asynchronously"><a class="header" href="#load-session-state-asynchronously">Load session state asynchronously</a></h2>
<p>The default session provider in the Alliance Business Suite loads session records from the underlying IDistributedCache backing store asynchronously only if the <code>ISession.LoadAsync</code> method is explicitly called before the TryGetValue, Set, or Remove methods. If LoadAsync isn't called first, the underlying session record is loaded synchronously, which can incur a performance penalty at scale.</p>
<p>To have apps enforce this pattern, wrap the DistributedSessionStore and DistributedSession implementations with versions that throw an exception if the LoadAsync method isn't called before TryGetValue, Set, or Remove. Register the wrapped versions in the services container.</p>
<h2 id="session-options"><a class="header" href="#session-options">Session options</a></h2>
<p>To override session defaults, visit your Portal Administration Dashboard.</p>
<h2 id="query-strings"><a class="header" href="#query-strings">Query strings</a></h2>
<p>A limited amount of data can be passed from one request to another by adding it to the new request's query string. This is useful for capturing the state in a persistent manner that allows links with the embedded states to be shared through email or social networks. Because URL query strings are public, never use query strings for sensitive data.</p>
<p>In addition to unintended sharing, including data in query strings can expose the app to Cross-Site Request Forgery (CSRF) attacks. Any preserved session state must protect against CSRF attacks. For more information, see Prevent Cross-Site Request Forgery (XSRF/CSRF) attacks in the Alliance Business Suite.</p>
<h2 id="hidden-fields"><a class="header" href="#hidden-fields">Hidden fields</a></h2>
<p>Data can be saved in hidden form fields and posted back on the next request. This is common in multi-page forms. Because the client can potentially tamper with the data, the app must always revalidate the data stored in hidden fields.</p>
<h2 id="httpcontextitems"><a class="header" href="#httpcontextitems">HttpContext.Items</a></h2>
<p>The <code>HttpContext.Items</code> collection is used to store data while processing a single request. The collection's contents are discarded after a request is processed. The Items collection is often used to allow components or middleware to communicate when they operate at different points in time during a request and have no direct way to pass parameters.</p>
<h2 id="cache"><a class="header" href="#cache">Cache</a></h2>
<p>Caching is an efficient way to store and retrieve data. The app can control the lifetime of cached items. For more information, see Response caching in the Alliance Business Suite.</p>
<p>Cached data isn't associated with a specific request, user, or session. Do not cache user-specific data that may be retrieved by other user requests.</p>
<p>To cache application-wide data, see Cache in-memory in the Alliance Business Suite.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../Web-Development/Client-Side-Apps.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../Web-API-Development.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../Web-Development/Client-Side-Apps.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../Web-API-Development.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
